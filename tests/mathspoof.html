<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
	<meta name="viewport" content="width=450">
  <title>math spoof detection</title>
  <link rel="stylesheet" type="text/css" href="testindex.css">
  <script src="testglobals.js"></script>
  <script src="testgeneric.js"></script>
	<script src="testmain.js"></script>
	<!-- custom -->
	<style>
		table {width: 430px;}
	</style>
</head>
<body>

	<table>
	<tr><td><h2>TorZillaPrint</h2></td></tr>
	<tr><td class="blurb"><a class="return" href="../index.html">return to TZP index</a></td></tr>
	</table>
	<table id="tb3">
		<col width="1%"><col width="99%">
		<thead><tr><th colspan="2">math spoof detection</th></tr></thead>
		<tr><td colspan="2" class="intro">
			<span class="no_color">blah blah</span>
		</td></tr>
		<tr><td colspan="2"><div class="btn-left"><span class="btn3 btn" onClick="outputMath()">[ re-run ]</span></div></td></tr>
		<tr><td colspan="2"></td></tr> <!--spacer-->
		<tr><td></td><td class="c mono spaces" id="output"></td></tr>
	</table>
	<br>

<script>
'use strict';

function run() {

	let output = []

	function build(r1,r2) {
		if (r1 == "separator") {
			output.push(s3 + "--- " + r2 + sc)
		} else {
			// compare
			let notation = " "+ (r1 == r2 ? sg + "\u2713" : sb + "\u274C") + sc
			// pad
			r1 = r1.toString().padEnd(24)
			r2 = r2.toString().padEnd(24)
			// push
			output.push(r1 +"   "+ r2 + notation)
		}
	}

	// ToDo: add error handling etc
		// loop thru a set
	let x, y
	
	// hypot/sqrt
	build("separator", "hypot/sqrt")
	x = 9; y = 3
	build( Math.hypot(x, y), Math.sqrt((x*x) + (y*y)) )
	x = 5; y = 7
	build( Math.hypot(x, y), Math.sqrt((x*x) + (y*y)) )
	x = 95; y = -23
	build( Math.hypot(x, y), Math.sqrt((x*x) + (y*y)) )
	x = Math.PI; y = Math.PI
	build( Math.hypot(x, y), Math.sqrt((x*x) + (y*y)) )

	if (isFF) {
		build(Math.hypot(1e-300, 1e-300), 1.414213562373095e-300)
	}
	build(Math.hypot(1e-3, 1e-3, 1e-3), 0.0017320508075688772)
	build(Math.hypot(1e300, 1e300), 1.4142135623730952e+300)
	build(Math.hypot(1e100, 1e200, 1e300), 1e300)
	build(Math.hypot(1e3, 1e-3), 1000.0000000005)
	build(Math.hypot(1e-300, 1e300), 1e300)
	build(Math.hypot(1e3, 1e-3, 1e3, 1e-3), 1414.2135623738021555)
	build(Math.hypot(1e1, 1e2, 1e3), Math.sqrt(1e2 + 1e4 + 1e6))
	build(Math.hypot(1e1, 1e2, 1e3, 1e4), Math.sqrt(1e2 + 1e4 + 1e6 + 1e8))


	// cos/sin
	build("separator", "cos/sin")
	x = 5; y = 2
	build( Math.cos(x-y), (Math.cos(x) * Math.cos(y)) + (Math.sin(x) * Math.sin(y)) )
	x = 1; y = 8
	build( Math.cos(x-y), (Math.cos(x) * Math.cos(y)) + (Math.sin(x) * Math.sin(y)) ) // catches cydec
	x = 8; y = -1
	build( Math.cos(x-y), (Math.cos(x) * Math.cos(y)) + (Math.sin(x) * Math.sin(y)) )

	/* https://en.wikipedia.org/wiki/Trigonometric_functions#cos */

	// law of sines
	// sinA/a = sinB/b = sinC/c
	build("separator", "law of sines")
	x = 3; y = 3
	build( Math.sin(60)/x, Math.sin(60)/y )
	build( Math.sin(Math.PI/3)/x, Math.sin(Math.PI/3)/y )
	x = 3; y = 3
	build( Math.sin(75)/x, Math.sin(75)/y )
	x = 5; y = 5
	build( x/Math.sin(45), y/Math.sin(45) )

	// law of cosines
	build("separator", "law of cosines")
	x = 3; y = 2.999999999999999
	let temp = Math.sqrt((x * x) + (y * y) - ( (2 * x * y) * Math.cos(Math.PI/3) ))
	// limit to 15 decimal places: values is usually 2.9999999999999996
	temp = temp.toFixed(15)
	build( temp, y )

	// output
	dom.output.innerHTML = output.join("<br>")
}

function outputMath() {
	// clear
	let items = document.getElementsByClassName("c mono")
	for (let i=0; i < items.length; i++) {items[i].textContent = ""}
	// delay so user can see things being reset
	setTimeout(function(){
		run()
	}, 170)
}

if ("undefined" != typeof InstallTrigger) {isFF = true}
s3 = s3.trim()
run()

</script>
</body>
</html>
